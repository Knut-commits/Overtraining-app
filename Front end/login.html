<!DOCTYPE html>
<html>
  <head> 
    <title>Login</title>  
  </head>
  <body>
    <h2>Login</h2>  
    <form id = "LoginForm"> 
      <input type = "text" placeholder = "Username" id = "username" required>
      <input type = "password" placeholder = "Password" id = "password" required>
      <input type = "submit" value = "Login" id = "LoginButton">

    </form>
    <script>
      document.getElementById('LoginForm').addEventListener('submit', function(event) {
        event.preventDefault(); // prevent from submititng the form
        const username = document.getElementByID('username').value; // get vlaue of username, so users inputted text
        const password = document.getElementByID('password').value; 

        try {
          const response = await fetch('https://localhost:5000/login',{
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            credentials: 'include', // include cookies iun the request
            body: JSON.stringify({ username, password}) // sends the username and password as a JSON OBject to the server
          
          });

          const data = await response.json(); // get the response from the server
          if(response.ok) {
            alert('login successful');
            window.location.href = 'https://localhost:5000/home'; //redirect to home page
          } else {
            document.getElementById('error-message').style.display = 'block'; //show error message
            document.getElementById('error-message').textContent = data.error || 'login failed'; // show erro message form teh server or default message

          }
        } catch (err) {
          document.getElementById('error-message').style.display = 'block'; 
          document.getElementById('error-message').textContent = 'An error occurred. Please try again Later.'; //show erro message if tehre is an error in the request


        }
      });
      </script>
    </body>
  </html>
  

      

        


        


        //typcally you sned the values to the sevrer for authentication
        console.log('Username:', username, 'Password:', password); // for now i am just logging to the console
        alert('Login successful') 




      })
    </script>
  </body>
</html>